# Turkov Modbus Integration for Home Assistant

Это кастомная интеграция для Home Assistant, позволяющая подключаться к устройствам Turkov Zenit по протоколу Modbus RTU через RS485 (с использованием USB–RS485-конвертера). Интеграция считывает данные с входных (input) и удерживаемых (holding) регистров, создаёт сенсоры для отображения параметров, а также предоставляет климатическую сущность с полным управлением режимами HVAC и вентилятора. Помимо этого, реализована расшифровка кодов ошибок (например, "HD6N: Обрыв связи блока реле адиабатического увлажнителя с цифровым датчиком влажности D6").

## Особенности

- **Сенсоры**: Создаются сенсоры для каждого входного и удерживаемого регистра, при этом значения, соответствующие перечислениям, отображаются в виде расшифровки (например, «Zenit (3)»).
- **Климат**: Реализована климатическая сущность, позволяющая управлять температурой, режимами HVAC (state_off, state_heat, state_cool, state_fan_only) и режимами вентилятора (state_fan_off, state_fan_low, state_fan_medium, state_fan_high, state_fan_auto).
- **Управление**: Значения удерживаемых регистров можно изменять непосредственно из Home Assistant.
- **Расшифровка ошибок**: Коды ошибок преобразуются в понятное описание с указанием кода ошибки.

## Установка через HACS

1. Откройте **Home Assistant** и перейдите в раздел **HACS** (Home Assistant Community Store).
2. В HACS в правом верхнем углу нажмите на три точки и выберите **Custom repositories**.
3. В поле **Repository** вставьте ссылку на репозиторий: https://github.com/malexmnt/turkov-modbus
4. В поле **Category** выберите **Integration**.
5. Нажмите **Add** для добавления репозитория.
6. После этого перейдите в раздел **Integrations** в HACS.
7. Найдите **Turkov Modbus Integration** и нажмите **Install**.
8. Перезагрузите Home Assistant, чтобы завершить установку и активировать интеграцию.

## Конфигурация

После установки интеграции выполните следующие действия для настройки:

1. Перейдите в **Configuration > Devices & Services** в интерфейсе Home Assistant.
2. Нажмите **+ Add Integration** и найдите **Turkov**.
3. Укажите необходимые параметры:
- **Devices**: список COM-портов (например, `/dev/ttyUSB0, /dev/ttyUSB1` или `COM3, COM4`).
- **Slave ID**: адрес устройства в протоколе Modbus.
4. После сохранения настроек интеграция автоматически создаст сенсоры для всех регистров и климатическую сущность.

## Поддержка и вклад

Если у вас возникли вопросы или вы хотите внести улучшения, пожалуйста, создавайте issue или pull request в репозитории:
[https://github.com/malexmnt/turkov-modbus](https://github.com/malexmnt/turkov-modbus)

## Changelog

Смотрите файл `CHANGELOG.md` для получения информации об изменениях в различных версиях.